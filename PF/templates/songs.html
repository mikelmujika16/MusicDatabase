
{% extends "base.html" %}

{% block title %}Songs{% endblock %}

{% block content %}
<div class="content">
    <h2>Songs</h2>
    <table >
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Duration</th>
                <th>Release Year</th>
                <th>Views</th>
                <th>Average Rating</th>
            </tr>
        </thead>
        <tbody>
            {% for song in canciones %}
            <tr>
                <td>{{ song[0] }}</td>
                <td>{{ song[1] }}</td>
                <td>{{ song[2] }}</td>
                <td>{{ song[3] }}</td>
                <td>{{ song[4] }}</td>
                <td>
                    {% if song[5] %}
                        {{ song[5]|round(2) }} <!-- Promedio de puntuación de la canción (redondeado a 2 decimales) -->
                    {% else %}
                        No ratings yet
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <h2>Create Song</h2>
    <form method="POST" action="/songs/create">
        <label for="nombre_cancion">Song Name:</label>
        <input type="text" id="nombre_cancion" name="nombre_cancion" required>

        <label for="duracion">Duration (HH:MM:SS):</label>
        <input type="text" id="duracion" name="duracion" required placeholder="00:00:00">

        <label for="ano_salida">Release Year:</label>
        <input type="number" id="ano_salida" name="ano_salida" required>

        <button type="submit">Create Song</button>
    </form>

    <h2>Delete Song</h2>
    <form method="POST" action="/songs/delete">
        <label for="id_cancion">Song ID:</label>
        <input type="number" id="id_cancion" name="id_cancion" required>

        <button type="submit">Delete Song</button>
    </form>

    <h2>Update Song</h2>
    <form method="POST" action="/songs/update">
        <label for="id_cancion">Song ID:</label>
        <input type="number" id="id_cancion" name="id_cancion" required>

        <label for="nombre_cancion">New Song Name:</label>
        <input type="text" id="nombre_cancion" name="nombre_cancion">

        <label for="duracion">New Duration (HH:MM:SS):</label>
        <input type="text" id="duracion" name="duracion" required placeholder="00:00:00">

        <label for="ano_salida">New Release Year:</label>
        <input type="number" id="ano_salida" name="ano_salida">

        <button type="submit">Update Song</button>
    </form>

    <h2>Rate a Song</h2>
    <form method="POST" action="/valorar">
        <label for="id_cancion">Select Song:</label>
        <select name="id_cancion" id="id_cancion" required>
            {% for cancion in canciones %}
                <option value="{{ cancion[0] }}">{{ cancion[1] }}</option>
            {% endfor %}
        </select>

        <label for="puntuacion">Rating (1-5):</label>
        <input type="number" id="puntuacion" name="puntuacion" min="1" max="5" required>

        <button type="submit">Submit Rating</button>
    </form>
</div>
{% endblock %}
