{% extends "base.html" %}

{% block title %}Users{% endblock %}

{% block content %}
<div class="content">
    <h1>Users</h1>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Last Name</th>
                <th>Nickname</th>
                <th>Email</th>
                <th>Songs</th> <!-- Nueva columna para canciones -->
            </tr>
        </thead>
        <tbody>
            {% for usuario_con_canciones in usuarios_con_canciones %}
            <tr>
                <td>{{ usuario_con_canciones['usuario'][0] }}</td>
                <td>{{ usuario_con_canciones['usuario'][1] }}</td>
                <td>{{ usuario_con_canciones['usuario'][2] }}</td>
                <td>{{ usuario_con_canciones['usuario'][3] }}</td>
                <td>{{ usuario_con_canciones['usuario'][4] }}</td>
                <td>
                    {% if usuario_con_canciones['canciones'] %}
                        {% for cancion in usuario_con_canciones['canciones'] %}
                            {{ cancion }}<br>
                        {% endfor %}
                    {% else %}
                        No songs added
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Add User</h2>
    <form method="POST" action="/users/add">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        <button type="submit">Add</button>
    </form>

    <h2>Delete User</h2>
    <form method="POST" action="/users/delete">
        <label for="id">User ID:</label>
        <input type="number" id="id" name="id" required>
        <button type="submit">Delete</button>
    </form>

    <h2>Update User</h2>
    <form method="POST" action="/users/update">
        <label for="id_usuario">User ID:</label>
        <input type="number" id="id_usuario" name="id_usuario" required>

        <label for="nombre">New Name:</label>
        <input type="text" id="nombre" name="nombre">

        <label for="apellido">New Last Name:</label>
        <input type="text" id="apellido" name="apellido">

        <label for="nickname">New Nickname:</label>
        <input type="text" id="nickname" name="nickname">

        <label for="email">New Email:</label>
        <input type="email" id="email" name="email">

        <button type="submit">Update User</button>
    </form>

    <h2>Add Song to User</h2>
    <form method="POST" action="/users/add_song">
        <label for="id_usuario">User:</label>
        <input type="number" id="id_usuario" name="id_usuario" required>

        <label for="id_cancion">Song:</label>
        <select name="id_cancion" id="id_cancion" required>
            {% for cancion in canciones %}
                <option value="{{ cancion[0] }}">{{ cancion[1] }}</option>
            {% endfor %}
        </select>

        <button type="submit">Add Song</button>
    </form>
</div>
{% endblock %}